<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Digital Image Correlation Engine: DICe_CustomApplication</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Digital Image Correlation Engine
   &#160;<span id="projectnumber">Version 1.0</span>
   </div>
   <div id="projectbrief">A modular, high-performance, image correlation tool used to compute full-field displacements and strains from digital images</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">DICe_CustomApplication </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Copyright 2015 Sandia Corporation. Under the terms of Contract DE-AC04-94AL85000 with Sandia Corporation, the U.S. Government retains certain rights in this software.</p>
<h1>Introduction </h1>
<p>This section of the documentation describes how to write a custom DIC application with <a class="el" href="namespace_d_i_ce.html" title="generic DICe classes and functions ">DICe</a>. For the example below, all of the steps assume that a Linux operating system is being used. For Windows, the cmake script needs to be modified to produce nmake makefiles, and the appropriate scripts should be exectuted as batch files.</p>
<p>The files for this example are in the folder <code>dice/examples/custom_app</code>. The <code>main.cpp</code> file provides a simple example to follow when developing a more sophisticated application.</p>
<h2>Code Design and Workflow </h2>
<p>A basic outline for how <a class="el" href="namespace_d_i_ce.html" title="generic DICe classes and functions ">DICe</a> performs a correlation is as follows. If more than one image is correlated, the basic workflow is the same, just applied numerous times.</p>
<p>Initialization phase:</p>
<ul>
<li>The reference and deformed image are read into memory</li>
<li>The correlation parameters are defined</li>
<li>Subsets are defined (for the local algorithm)</li>
</ul>
<p>Execution phase:</p>
<ul>
<li>The correlation is executed</li>
<li>Results are written to disk</li>
<li>The ref or def images can be changed and the execution phase repeated</li>
</ul>
<p>All of the initialization data and correlation parameters are stored in a <code><a class="el" href="class_d_i_ce_1_1_schema.html" title="The centralized container for the correlation plan and parameters. ">DICe::Schema</a></code>, this class controls the algorithms, images, and subset locations. The <code><a class="el" href="class_d_i_ce_1_1_schema.html" title="The centralized container for the correlation plan and parameters. ">DICe::Schema</a></code> also stores the correlation results and all other fields. An image is stored as an array in a <code><a class="el" href="class_d_i_ce_1_1_image.html">DICe::Image</a></code>. A copy of a portion of the image intensity array is made available through a <code><a class="el" href="class_d_i_ce_1_1_subset.html" title="Subsets are used to store temporary collections of pixels for comparison between the reference and de...">DICe::Subset</a></code>. The bulk of the correlation algorithm resides in a <code><a class="el" href="class_d_i_ce_1_1_objective.html" title="A container class for the subsets, optimization algorithm and initialization routine used to correlat...">DICe::Objective</a></code>. More details on each of these are provided in the class documentation.</p>
<h2>Rules of Thumb </h2>
<p>When developing a custom application using <a class="el" href="namespace_d_i_ce.html" title="generic DICe classes and functions ">DICe</a>, keep the following points in mind:</p>
<ul>
<li>The number of subsets cannot change once a <a class="el" href="class_d_i_ce_1_1_schema.html" title="The centralized container for the correlation plan and parameters. ">DICe::Schema</a> is initialized. If the number of subsets needs to change (for instance, using subset adaptivity), re-instantiate a new <a class="el" href="class_d_i_ce_1_1_schema.html" title="The centralized container for the correlation plan and parameters. ">DICe::Schema</a>.</li>
<li>The locations of subset centroids can change after initialization, but not the number.</li>
<li>New correlation parameters can be used for an old <a class="el" href="class_d_i_ce_1_1_schema.html" title="The centralized container for the correlation plan and parameters. ">DICe::Schema</a> by calling the set_params() method and passing in the new parameters as a Teuchos::ParameterList</li>
<li>The reference or deformed images can be changed after the <a class="el" href="class_d_i_ce_1_1_schema.html" title="The centralized container for the correlation plan and parameters. ">DICe::Schema</a> is initialized with a call to <code>set_ref_image()</code> or <code>set_def_image()</code>. These ref and def images should be the same dimensions, and the new ref or def image cannot change the image dimensions</li>
</ul>
<h2>Custom DIC Application Example </h2>
<p>An example project which can be used to build a custom DIC application using <a class="el" href="namespace_d_i_ce.html" title="generic DICe classes and functions ">DICe</a> methods is provided in the examples directory in the folder </p><pre class="fragment">dice/tests/examples/custom_app
</pre><p>To use this folder as a starting point for a new project, copy the folder and its contents to a new location. </p><pre class="fragment">cp dice/tests/examples/custom_app ./&lt;new_project_location&gt;
</pre><p>Inside the project folder is a <code>src</code> directory which can be removed, this was an artifact of including the <code>custom_app</code> example in the regression tests for <a class="el" href="namespace_d_i_ce.html" title="generic DICe classes and functions ">DICe</a>. It is not needed for building a custom application outside of <a class="el" href="namespace_d_i_ce.html" title="generic DICe classes and functions ">DICe</a>.</p>
<p>Create a <code>build</code> directory in the top level of the project and change directories into it. </p><pre class="fragment">mkdir build
cd build
</pre><p>Inside the build directory, create a CMake script similar to the example given below called <code>do-cmake</code> on Linux or <code>do-cmake.bat</code> on Windows: </p><pre class="fragment">#!/bin/bash

rm -f CMakeCache.txt
rm -rf CMakeFiles

cmake \
    -D CMAKE_BUILD_TYPE=RELEASE \
    -D DICE_TRILINOS_DIR:FILEPATH=&lt;location_of_trilinos_install&gt; \
    -D DICE_LIB_DIR:FILEPATH=&lt;location_of_dice_installed_libraries&gt; \
    -D DICE_HEADER_DIR:FILEPATH=&lt;location_of_dice_headers&gt; \
    -D CMAKE_CXX_FLAGS:STRING="-Wall" \
    ../

# define the tiff directory if libtiff is installed in another location than the system path
# add "-D TIFF_DIR:FILEPATH="&lt;libtiff_location&gt;" \" to the variables above
</pre><p>Then, run the configuration </p><pre class="fragment">$ ./do-cmake
</pre><p>Here we again use the <code>$</code> symbol to denote the command line prompt. After the project is configured, build it with </p><pre class="fragment">$ make
</pre><p>To test that the application was built correctly, change directories back to the project top level dir (where the input xml files are located) and run the executable </p><pre class="fragment">$ cd ../
$ ./build/main
</pre><p>The source file <code>main.cpp</code> in the top level directory has a number of notes in the comments to help with setting up a <a class="el" href="class_d_i_ce_1_1_schema.html" title="The centralized container for the correlation plan and parameters. ">DICe::Schema</a> and executing a correlation. This file is a good starting place for developing a custom DIC application. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Feb 15 2016 12:43:24 for Digital Image Correlation Engine by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
